(function(){
    'use strict';

    angular.module('sat.services').provider('authenticationAlert', function () {

        this.$get = ['$rootScope', function ($rootScope) {

            function AuthenticationAlert(){

                $rootScope.$on('authentication:login-error', function(event, response) {
                    $rootScope.$broadcast('event:application-alert', {
                        type: 'error',
                        title: 'Login failed',
                        content: response.data.message,
                        key: 'authentication'
                    });
                });

                $rootScope.$on('authentication:logout-error', function () {
                    $rootScope.$broadcast('event:application-alert', {
                        type: 'error',
                        content: 'Logout failed',
                        key: 'authentication'
                    });
                });

                $rootScope.$on('authentication:logged-in', function() {
                    $rootScope.$broadcast('event:clear-application-alert', {
                        key: 'authentication'
                    });
                });
            }
            return new AuthenticationAlert();
        }];
    });


}());

