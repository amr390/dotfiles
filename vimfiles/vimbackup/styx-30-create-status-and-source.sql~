CREATE TABLE STATUS_TYPE(
    ID                      NUMBER(20,0) NOT NULL,
    CODE                    VARCHAR2(80) NOT NULL,
    AREA_TYPE_ID            NUMBER(20,0) NOT NULL,
    VERSION                 NUMBER(20,0) DEFAULT 0 NOT NULL,
    USER_ADD	            VARCHAR2(255) NOT NULL,
    DT_ADD                  DATE NOT NULL,
    USER_UPDATE             VARCHAR2(255) NOT NULL,
    DT_UPDATE               DATE NOT NULL,
    CREATION_DATE_SOURCE    TIMESTAMP NULL, 
    CREATION_USER_SOURCE    VARCHAR2(255) NULL
) TABLESPACE STYX_TABLES;

CREATE SEQUENCE SEQ_STATUS_TYPE;

--primary key
ALTER TABLE STATUS_TYPE ADD CONSTRAINT PK_STATUS_TYPE PRIMARY KEY(ID)
USING INDEX TABLESPACE STYX_INDEXES;
--foreign key
ALTER TABLE STATUS_TYPE ADD CONSTRAINT FK_STATUS_TYPE_AREA_TYPE FOREIGN KEY(AREA_TYPE_ID)
REFERENCES AREA_TYPE(ID);
--Unique key
ALTER TABLE STATUS_TYPE ADD CONSTRAINT UK_STATUS_TYPE_AT_C UNIQUE(AREA_TYPE_ID, CODE) USING INDEX TABLESPACE STYX_INDEXES;


CREATE TABLE STATUS_CODE(
    ID                      NUMBER(20,0) NOT NULL,
    CODE                    VARCHAR(255) NOT NULL,
    STATUS_TYPE_ID          NUMBER(20,0) NOT NULL,
    VERSION                 NUMBER(20,0) DEFAULT 0 NOT NULL,
    USER_ADD	            VARCHAR2(255) NOT NULL,
    DT_ADD                  DATE NOT NULL,
    USER_UPDATE             VARCHAR2(255) NOT NULL,
    DT_UPDATE               DATE NOT NULL,
    CREATION_DATE_SOURCE    TIMESTAMP NULL, 
    CREATION_USER_SOURCE    VARCHAR2(255) NULL
) TABLESPACE STYX_TABLES; 

CREATE SEQUENCE SEQ_STATUS_CODE;
-- primary key
ALTER TABLE STATUS_CODE ADD CONSTRAINT PK_STATUS_CODE PRIMARY KEY(ID)
USING INDEX TABLESPACE STYX_INDEXES;
-- foreign key
ALTER TABLE STATUS_CODE ADD CONSTRAINT FK_STATUS_CODE_STATUS_TPYE FOREIGN KEY (STATUS_TYPE_ID)
REFERENCES STATUS_TYPE(ID);

CREATE TABLE STATUS(
    ID                      NUMBER(20,0) NOT NULL,
    START_DATE              DATE,
    END_DATE                DATE,
    STATUS_CODE_ID          NUMBER(20,0) NOT NULL,
    VERSION                 NUMBER(20,0) DEFAULT 0 NOT NULL,
    USER_ADD	            VARCHAR2(255) NOT NULL,
    DT_ADD                  DATE NOT NULL,
    USER_UPDATE             VARCHAR2(255) NOT NULL,
    DT_UPDATE               DATE NOT NULL,
    CREATION_DATE_SOURCE    TIMESTAMP NULL, 
    CREATION_USER_SOURCE    VARCHAR2(255) NULL
) TABLESPACE STYX_TABLES; 

CREATE SEQUENCE SEQ_STATUS;

-- primary key
ALTER TABLE STATUS ADD CONSTRAINT PK_STATUS PRIMARY KEY(ID)
USING INDEX TABLESPACE STYX_INDEXES; 

-- foreign keys
ALTER TABLE STATUS ADD CONSTRAINT FK_STATUS_STATUS_CODE FOREIGN KEY(STATUS_CODE_ID)
REFERENCES STATUS_CODE(ID);

CREATE TABLE SOURCE(
    ID                      NUMBER(20,0) NOT NULL,
    CODE                    VARCHAR2(80) NOT NULL,
    VERSION                 NUMBER(20,0) DEFAULT 0 NOT NULL,
    USER_ADD	            VARCHAR2(255) NOT NULL,
    DT_ADD                  DATE NOT NULL,
    USER_UPDATE             VARCHAR2(255) NOT NULL,
    DT_UPDATE               DATE NOT NULL,
    CREATION_DATE_SOURCE    TIMESTAMP NULL, 
    CREATION_USER_SOURCE    VARCHAR2(255) NULL
) TABLESPACE STYX_TABLES; 

-- primary key
ALTER TABLE SOURCE ADD CONSTRAINT PK_SOURCE PRIMARY KEY(ID)
USING INDEX TABLESPACE STYX_INDEXES; 

ALTER TABLE SOURCE ADD CONSTRAINT UQ_SOURCE_CODE UNIQUE (CODE) USING INDEX TABLESPACE STYX_INDEXES;
CREATE SEQUENCE SEQ_SOURCE;

