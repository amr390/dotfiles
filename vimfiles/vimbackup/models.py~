from django.db import models


# TODO: Contributor details ??
class Contributor(models.Model):
    identifier = models.CharField(max_length=16, blank=False, null=False)
    first_name = models.CharField(max_length=64, blank=False, null=False)
    last_name = models.CharField(max_length=255, blank=False, null=False)
    email = models.EmailField(max_length=255, blank=False, null=False)

    def __str__(self):
        return self.last_name + ", " + self.first_name


class Client(models.Model):
    identifier = models.CharField(max_length=16, blank=False, null=False)
    full_name = models.CharField(max_length=255, null=False)

    def __str__(self):
        return self.full_name


class Concept(models.Model):
    name = models.CharField(max_length=64, null=False, blank=False)
    description = models.CharField(max_length=255, null=False, blank=False)
    vat_type = models.CharField(max_length=2, null=False, blank=False)
    tax_type = models.CharField(max_length=2, null=False, blank=False)

    def __str__(self):
        return self.name


class PayableVAT(models.Model):
    invoice_number = models.PositiveSmallIntegerField(null=False)
    concept = models.ForeignKey(Concept)
    contributor = models.ForeignKey(Contributor)
    client = models.ForeignKey(Client)
    base_cost = models.DecimalField(max_digits=8, decimal_places=2)
    vat_cost = models.DecimalField(max_digits=8, decimal_places=2)
    tax_cost = models.DecimalField(max_digits=8, decimal_places=2)
    total_cost = models.DecimalField(max_digits=8, decimal_places=2)
    date_issue = models.DateTimeField()
    date_listing = models.DateTimeField()

    def __str__(self):
        return self.concept.name


class DeductibleVAT(models.Model):
    concept = models.ForeignKey(Concept)
    contributor = models.ForeignKey(Contributor)
    vat_cost = models.DecimalField(max_digits=8, decimal_places=2)
    base_cost = models.DecimalField(max_digits=8, decimal_places=2)
    effective_cost = models.DecimalField(max_digits=8, decimal_places=2)
    percent_applied = models.DecimalField(max_digits=4, decimal_places=2)
    date_issue = models.DateTimeField()
    date_listing = models.DateTimeField()

    def __str__(self):
        return self.concept.name


class VatbookSummary:
    def __init__(self, full_name, identifier, exercices):
        self.full_name = full_name
        self.identifier = identifier
        self.exercices = exercices


class Income:
    invoice_number = ""
    concept = ""
    concept_id = ""

    def __init__(self, invoice_number, concept, concept_id, vat_type, vat_cost,
                 tax_type, tax_cost, base_cost, total_cost):
        self.invoice_number = invoice_number
        self.concept = concept
        self.concept_id = concept_id
        self.vat_type = vat_type
        self.tax_type = tax_type
        self.vat_cost = vat_cost
        self.tax_cost = tax_cost
        self.base_cost = base_cost
        self.total_cost = total_cost


class Tax:
    def __init__(self, invoice_number, concept, concept_id, vat_type, vat_cost,
                 percent_applied, base_cost, effective_cost, total_cost):
        self.invoice_number = invoice_number
        self.concept = concept
        self.concept_id = concept_id
        self.vat_type = vat_type
        self.vat_cost = vat_cost
        self.percent_applied = percent_applied
        self.base_cost = base_cost
        self.effective_cost = effective_cost
        self.total_cost = total_cost


class Excercise:
    def __init__(self, year, period1, period2, period3, period4):
        self.year = year
        self.period1 = period1
        self.period2 = period2
        self.period3 = period3
        self.period4 = period4


class Period:
    def __init__(self, incomes, taxes):
        self.incomes = incomes
        self.taxes = taxes
