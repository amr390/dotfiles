CREATE TABLE PART_OF_CITY(
    ID                      NUMBER(20,0) NOT NULL,
    CITY_ID                 NUMBER(20,0) NOT NULL,
    STREET_ID               NUMBER(20,0) NOT NULL,
    START_DATE              DATE,
    END_DATE                DATE,
    VERSION                 NUMBER(20,0) DEFAULT 0 NOT NULL,
    USER_ADD	            VARCHAR2(255) NOT NULL,
    DT_ADD                  DATE NOT NULL,
    USER_UPDATE             VARCHAR2(255) NOT NULL,
    DT_UPDATE               DATE NOT NULL


) TABLESPACE STYX_TABLES; 

CREATE SEQUENCE SEQ_PART_OF_CITY;

-- primary key
ALTER TABLE PART_OF_CITY ADD CONSTRAINT PK_PART_OF_CITY_ID PRIMARY KEY (ID)
USING INDEX TABLESPACE STYX_INDEXES;

ALTER TABLE PART_OF_CITY ADD CONSTRAINT FK_PART_OF_CITY_CITY FOREIGN KEY(CITY_ID)
REFERENCES CITY(ID);

-- The reference cannot be made to Street, because it does not
-- have any field of its own and therefore EclipseLink does not save the Street ID
-- before saving the Street-dependent entities, resulting in Parent Key Not found
-- errors. The area is indeed saved and then the dependent entities can find their
-- parent key.
ALTER TABLE PART_OF_CITY ADD CONSTRAINT FK_PART_OF_CITY_STREET FOREIGN KEY(STREET_ID)
REFERENCES AREA(ID); 

